
<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Erstelltes Formular</title>
    <style>
        .header-container {
            background-color: white;
            border-radius: 8px;
            padding: 20px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        .prev-header-content {
            column-count: 2;
        }

        .prev-header-logo {
            float: left;
            width: 150px;
            height: 150px;
            margin-right: 15px;
        }

        .prev-header-text {
            float: left;
            text-align: left;
        }

        body {
            font-family: Arial, sans-serif;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }
        .form-element {
            margin-bottom: 15px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
        }
        input, textarea, select {
            width: 100%;
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        .radio-group label, .checkbox-group label {
            display: block;
            margin-bottom: 5px;
            font-weight: normal;
        }
        .submit-btn {
            background-color: #4CAF50;
            color: white;
            padding: 10px 15px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
        }
    </style>
</head>
<header>
    <div class="header-container" id="header-container">
        <div class="header-content">
            <div class="prev-header-logo"><img id="header-img" src="undefined" alt="LOGO" width="150px" height="150px"></div>
            <div class="header-text">undefined</div>
        </div>
    </div>
</header>
<body>
    <h1>Formular</h1>
    <form id="generated-form">

<div class="form-element">
        </div>
    </form>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.getElementById('generated-form');
    const downloadButton = document.createElement('button');
    
    // Download-Button erstellen und stylen
    downloadButton.textContent = 'Formular als JSON herunterladen';
    downloadButton.type = 'button';
    downloadButton.className = 'submit-btn';
    downloadButton.style.backgroundColor = '#2196F3';
    downloadButton.style.marginTop = '10px';
    
    // Download-Button nach dem Formular einf체gen
    form.parentNode.insertBefore(downloadButton, form.nextSibling);
    
    // Funktion zum Sammeln der Formulardaten
    function collectFormData() {
        const formData = {};
        const formElements = form.querySelectorAll('.form-element');
        
        formElements.forEach(element => {
            const labelElement = element.querySelector('label');
            if (!labelElement) return;
            
            const labelText = labelElement.textContent.replace(/[:-]d+$/, '').trim();
            const inputElements = element.querySelectorAll('input, textarea, select');
            
            if (inputElements.length === 1) {
                // Einzelnes Input-Element
                const input = inputElements[0];
                let value = '';
                
                if (input.type === 'checkbox') {
                    value = input.checked;
                } else if (input.type === 'radio') {
                    const selectedRadio = element.querySelector('input[type="radio"]:checked');
                    value = selectedRadio ? selectedRadio.value : '';
                } else if (input.tagName === 'SELECT') {
                    value = input.value;
                } else {
                    value = input.value;
                }
                
                if (labelText && (value !== '' || input.type === 'checkbox')) {
                    formData[labelText] = value;
                }
            } else if (inputElements.length > 1) {
                // Mehrere Input-Elemente (Radio-Buttons, Checkboxen)
                if (element.querySelector('input[type="radio"]')) {
                    // Radio-Buttons - nur der ausgew채hlte Wert
                    const selectedRadio = element.querySelector('input[type="radio"]:checked');
                    if (selectedRadio) {
                        formData[labelText] = selectedRadio.value;
                    }
                } else if (element.querySelector('input[type="checkbox"]')) {
                    // Checkboxen - Array aller ausgew채hlten Werte
                    const checkedBoxes = element.querySelectorAll('input[type="checkbox"]:checked');
                    const values = Array.from(checkedBoxes).map(cb => cb.value);
                    if (values.length > 0) {
                        formData[labelText] = values;
                    }
                }
            }
        });
        
        return formData;
    }
    
    // Funktion zum Herunterladen der JSON-Daten
    function downloadJSON() {
        const formData = collectFormData();
        const jsonString = JSON.stringify(formData, null, 2);
        const blob = new Blob([jsonString], { type: 'application/json' });
        const url = URL.createObjectURL(blob);
        
        const a = document.createElement('a');
        a.href = url;
        a.download = 'formular-daten.json';
        document.body.appendChild(a);
        a.click();
        document.body.removeChild(a);
        URL.revokeObjectURL(url);
    }
    
    // Event-Listener f체r den Download-Button
    downloadButton.addEventListener('click', downloadJSON);
    
    // Optional: Daten auch beim Absenden des Formulars sammeln (verhindert Standard-Submit)
    form.addEventListener('submit', function(event) {
        event.preventDefault();
        downloadJSON();
    });
});
</script>
        <!-- Code injected by live-server -->
<script>
	// <![CDATA[  <-- For SVG support
	if ('WebSocket' in window) {
		(function () {
			function refreshCSS() {
				var sheets = [].slice.call(document.getElementsByTagName("link"));
				var head = document.getElementsByTagName("head")[0];
				for (var i = 0; i < sheets.length; ++i) {
					var elem = sheets[i];
					var parent = elem.parentElement || head;
					parent.removeChild(elem);
					var rel = elem.rel;
					if (elem.href && typeof rel != "string" || rel.length == 0 || rel.toLowerCase() == "stylesheet") {
						var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, '');
						elem.href = url + (url.indexOf('?') >= 0 ? '&' : '?') + '_cacheOverride=' + (new Date().valueOf());
					}
					parent.appendChild(elem);
				}
			}
			var protocol = window.location.protocol === 'http:' ? 'ws://' : 'wss://';
			var address = protocol + window.location.host + window.location.pathname + '/ws';
			var socket = new WebSocket(address);
			socket.onmessage = function (msg) {
				if (msg.data == 'reload') window.location.reload();
				else if (msg.data == 'refreshcss') refreshCSS();
			};
			if (sessionStorage && !sessionStorage.getItem('IsThisFirstTime_Log_From_LiveServer')) {
				console.log('Live reload enabled.');
				sessionStorage.setItem('IsThisFirstTime_Log_From_LiveServer', true);
			}
		})();
	}
	else {
		console.error('Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.');
	}
	// ]]>
</script>
</body>
        </html>
